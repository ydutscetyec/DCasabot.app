#include <Arduino.h>

// QTR-1RC pins
const int leftSensor = 22;    // D22
const int midSensor = 25;     // D25
const int rightSensor = 32;   // D32

// Function to read QTR-1RC
unsigned int readQTR(int pin) {
  unsigned int count = 0;
  
  pinMode(pin, OUTPUT);
  digitalWrite(pin, HIGH);    // Charge the capacitor
  delayMicroseconds(10);      // Short delay to charge

  pinMode(pin, INPUT);        // Set to input to discharge
  while (digitalRead(pin) == HIGH && count < 3000) {
    count++;                  // Count how long pin stays HIGH
  }
  
  return count;
}

void setup() {
  Serial.begin(115200);
}

void loop() {
  unsigned int leftValue = readQTR(leftSensor);
  unsigned int midValue = readQTR(midSensor);
  unsigned int rightValue = readQTR(rightSensor);

  Serial.print("Left: ");
  Serial.print(leftValue);
  Serial.print("\tMid: ");
  Serial.print(midValue);
  Serial.print("\tRight: ");
  Serial.println(rightValue);

  delay(200); // Short delay between reads
}
