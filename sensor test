// QTR-1RC sensor pins
const int leftPin = 22;
const int centerPin = 25;
const int rightPin = 32;

// Function to read RC sensor
unsigned int readQTR(int pin) {
  unsigned int time = 0;

  // Step 1: charge the capacitor
  pinMode(pin, OUTPUT);
  digitalWrite(pin, HIGH);
  delayMicroseconds(10);

  // Step 2: switch to input and measure discharge time
  pinMode(pin, INPUT);
  while (digitalRead(pin)) {
    time++;
    if (time > 3000) break; // timeout to avoid infinite loop
  }
  
  return time;
}

void setup() {
  Serial.begin(115200);
  delay(500);
  Serial.println("QTR-1RC Raw RC Timing Test Started");
}

void loop() {
  unsigned int leftVal = readQTR(leftPin);
  unsigned int centerVal = readQTR(centerPin);
  unsigned int rightVal = readQTR(rightPin);

  Serial.print("Left: ");
  Serial.print(leftVal);
  Serial.print(" | Center: ");
  Serial.print(centerVal);
  Serial.print(" | Right: ");
  Serial.println(rightVal);

  delay(200);
}
